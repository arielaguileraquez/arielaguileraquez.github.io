<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Handrolls Local</title>
<style>
body {
  font-family: Inter, system-ui, -apple-system, Roboto, 'Segoe UI', Arial;
  background: #f7f7f8;
  color: #111;
  margin: 0;
  padding: 20px;
}
.container { max-width: 800px; margin: 0 auto; }
.card { background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 6px 18px rgba(20,20,30,0.06); margin-bottom: 20px; }
h2 { margin-top: 0; }
.checkbox-group { display: flex; flex-direction: column; gap: 10px; margin-bottom: 16px; }
.checkbox-group label {
  display: flex; align-items: center; gap: 12px; padding: 12px 16px;
  border-radius: 10px; border: 1px solid #eee; background: #fafafa; cursor: pointer; font-size: 1.15rem;
}
input[type="checkbox"] { width: 22px; height: 22px; }
select,input[type="number"],input[type="text"]{
  width:100%; padding:14px; border-radius:8px; border:1px solid #ccc; margin-bottom:12px; font-size:1.1rem;
}
button.add-btn{background:#1f8ef1;margin-top:12px;padding:12px;font-size:1.1rem;color:#fff;border:none;border-radius:8px;cursor:pointer;}
button.add-btn:hover{background:#0f6ed3;}
.preview{margin-top:12px;padding:12px;background:#fcfcff;border-radius:8px;font-size:1rem;color:#555;}
.promo-buttons button{margin-top:6px;width:100%;padding:10px;font-size:1rem;border-radius:8px;border:none;background:#06a763;color:#fff;cursor:pointer;}
.promo-buttons button:hover{background:#048e50;}
#carrito-container { display:block; margin-top:20px; }
.cart-item { padding: 12px; border-bottom:1px solid #eee; font-size:1rem; }
.cart-item button { background:#efefef;color:#333;padding:8px 12px;font-size:0.95rem;margin-top:6px;width:auto; border:none;border-radius:6px; cursor:pointer; }
.cart-item button:hover { background:#ddd; }
.total { font-size:18px; color:#06a763; font-weight:bold; margin-top:12px; text-align:right; }
@media(max-width:480px){
  input[type="checkbox"]{width:26px;height:26px;}
  .checkbox-group label{font-size:1.05rem;padding:10px 14px;}
  select,input[type="number"],input[type="text"],button.add-btn{font-size:1rem;padding:12px;}
}
</style>
</head>
<body>

<div class="container">
  <div class="card">
    <h2>Tipo</h2>
    <select id="tipo">
      <option value="bigpappa">Big Pappa (3 ingredientes)</option>
      <option value="goliat">Goliat XL (4 ingredientes)</option>
    </select>

    <h2>Prote√≠nas</h2>
    <div id="proteinas" class="checkbox-group">
      <label><input type="checkbox" value="kanikama"> Kanikama</label>
      <label><input type="checkbox" value="champinon"> Champi√±√≥n</label>
      <label><input type="checkbox" value="pollo"> Pollo</label>
      <label><input type="checkbox" value="camaron"> Camar√≥n</label>
      <label><input type="checkbox" value="salmon"> Salm√≥n</label>
    </div>

    <h2>Ingredientes</h2>
    <div id="ingredientes" class="checkbox-group">
      <label><input type="checkbox" value="queso"> Queso</label>
      <label><input type="checkbox" value="palta"> Palta</label>
      <label><input type="checkbox" value="cebollin"> Ceboll√≠n</label>
      <label><input type="checkbox" value="morron"> Morr√≥n</label>
      <label><input type="checkbox" value="queso_crema"> Queso Crema</label>
    </div>

    <label>Cantidad</label>
    <input type="number" id="cantidad" min="1" value="1">

    <div class="preview" id="preview">Preview: selecciona ingredientes</div>
    <button class="add-btn" onclick="agregarAlCarrito()">Agregar al carrito</button>

    <div class="promo-buttons">
      <button onclick="cargarPromo('bigpappa',['pollo'],['palta','queso'],1)">Promo: BigPappa Pollo + Palta + Queso</button>
      <button onclick="cargarPromo('goliat',['camaron'],['palta','queso','cebollin'],2)">Promo: Goliat Camar√≥n x2</button>
    </div>
  </div>

  <div class="card">
    <h3>üõí Carrito</h3>
    <div id="carrito-container">
      <div id="carrito"></div>
      <p class="total" id="total">Total: $0</p>

      <h3>Entrega</h3>
      <label><input type="radio" name="entrega" value="retiro" checked> Retiro en local</label>
      <label><input type="radio" name="entrega" value="reparto"> Reparto (+$1000)</label>
      <input type="text" id="direccion" placeholder="Ingresa direcci√≥n" style="display:none;margin-top:8px;">

      <button class="add-btn" onclick="pagar()">Pagar</button>
    </div>
  </div>
</div>

<script>
const preciosBase={bigpappa:{kanikama:2500,champinon:2800,pollo:2800,camaron:3000,salmon:3500},goliat:{kanikama:3800,champinon:4000,pollo:4000,camaron:4300,salmon:4500}};
let carrito=[];

const $=(s)=>document.querySelector(s), $$=(s)=>document.querySelectorAll(s);

function getCheckedValues(sel){return Array.from(document.querySelectorAll(sel+' input:checked')).map(i=>i.value);}

function actualizarPreview(){
  const tipo=$('#tipo').value;
  const proteinas=getCheckedValues("#proteinas");
  const ing=getCheckedValues("#ingredientes");
  const cant=parseInt($('#cantidad').value);

  if(proteinas.length===0){$('#preview').innerText="Selecciona al menos una prote√≠na"; return;}
  let precio=preciosBase[tipo][proteinas[0]];
  if(proteinas.length>1) precio+=(proteinas.length-1)*800;
  const incluidos=tipo==='bigpappa'?2:3;
  ing.forEach((i,n)=>{if(n>=incluidos) precio+=i==='queso_crema'?600:500;});
  $('#preview').innerText=`${cant} x ${tipo.toUpperCase()} ‚Äî Prote√≠nas: ${proteinas.join(', ')} ‚Äî Ingredientes: ${ing.join(', ') || 'ninguno'} ‚Äî Precio unitario: $${precio}`;
  return {tipo,proteinas,ing,cant,precio};
}

function agregarAlCarrito(){
  const p=actualizarPreview();
  if(!p) return;
  carrito.push({...p});
  mostrarCarrito();
}

function mostrarCarrito(){
  const c=$('#carrito');
  c.innerHTML=''; 
  let total=0;
  carrito.forEach(i=>{
    const itemTotal=i.precio*i.cant;
    total+=itemTotal;
    c.innerHTML+=`<div class="cart-item">
      <p>${i.cant} x ${i.tipo.toUpperCase()}</p>
      <p>üêü Prote√≠nas: ${i.proteinas.join(', ')}</p>
      <p>üåø Ingredientes: ${i.ing.join(', ') || 'ninguno'}</p>
      <p>Total: $${itemTotal}</p>
      <button onclick="eliminar(${carrito.indexOf(i)})">‚ùå Eliminar</button>
    </div>`;
  });

  // Costo de reparto si aplica
  const entrega=$('input[name="entrega"]:checked').value;
  if(entrega==='reparto' && carrito.length>0) total+=1000;

  $('#total').innerText="Total: $"+total;
}

function eliminar(i){carrito.splice(i,1); mostrarCarrito(); }

$$('input[name="entrega"]').forEach(r=>r.addEventListener('change',()=>{
  $('#direccion').style.display=r.value==='reparto'?'block':'none';
  mostrarCarrito(); // recalcula total din√°micamente
}));

function pagar(){
  if(carrito.length===0){alert("El carrito est√° vac√≠o"); return;}
  const entrega=$('input[name="entrega"]:checked').value;
  const dir=$('#direccion').value.trim();
  if(entrega==='reparto' && dir===''){alert("Ingresa la direcci√≥n para reparto"); return;}
  let total=carrito.reduce((sum,i)=>sum+i.precio*i.cant,0);
  if(entrega==='reparto') total+=1000;
  alert(`Pago simulado\nTotal: $${total}\nEntrega: ${entrega}${entrega==='reparto'?`\nDirecci√≥n: ${dir}`:''}`);
}

function cargarPromo(tipo,prot,ing,cant){
  $('#tipo').value=tipo; 
  $$("#proteinas input").forEach(i=>i.checked=prot.includes(i.value));
  $$("#ingredientes input").forEach(i=>i.checked=ing.includes(i.value));
  $('#cantidad').value=cant; 
  actualizarPreview();
}

$('#tipo').addEventListener('change', actualizarPreview);
$('#cantidad').addEventListener('input', actualizarPreview);
$$("#proteinas input,#ingredientes input").forEach(i=>i.addEventListener('change', actualizarPreview));
actualizarPreview();
</script>

</body>
</html>
